"use strict";(self.webpackChunkfrontend_notes=self.webpackChunkfrontend_notes||[]).push([[3047],{927:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>i,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"react/react-zet-book/useCallback\u8207useMemo \u7684\u6b63\u78ba\u4f7f\u7528\u6642\u6a5f","title":"useCallback \u8207 useMemo \u7684\u6b63\u78ba\u4f7f\u7528\u6642\u6a5f","description":"useCallback\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f","source":"@site/docs/react/react-zet-book/22-useCallback\u8207useMemo \u7684\u6b63\u78ba\u4f7f\u7528\u6642\u6a5f.mdx","sourceDirName":"react/react-zet-book","slug":"/react/react-zet-book/useCallback-useMemo","permalink":"/frontend-notes/docs/react/react-zet-book/useCallback-useMemo","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react/react-zet-book/22-useCallback\u8207useMemo \u7684\u6b63\u78ba\u4f7f\u7528\u6642\u6a5f.mdx","tags":[{"inline":true,"label":"2024iT\u9435\u4eba\u8cfd","permalink":"/frontend-notes/docs/tags/2024-i-t\u9435\u4eba\u8cfd"},{"inline":true,"label":"React","permalink":"/frontend-notes/docs/tags/react"},{"inline":true,"label":"\u300aReact \u601d\u7dad\u9032\u5316\u300b\u8b80\u66f8\u7b46\u8a18","permalink":"/frontend-notes/docs/tags/\u300a-react-\u601d\u7dad\u9032\u5316\u300b\u8b80\u66f8\u7b46\u8a18"},{"inline":true,"label":"component","permalink":"/frontend-notes/docs/tags/component"},{"inline":true,"label":"useCallback","permalink":"/frontend-notes/docs/tags/use-callback"},{"inline":true,"label":"useMemo","permalink":"/frontend-notes/docs/tags/use-memo"}],"version":"current","sidebarPosition":22,"frontMatter":{"slug":"useCallback-useMemo","title":"useCallback \u8207 useMemo \u7684\u6b63\u78ba\u4f7f\u7528\u6642\u6a5f","authors":["ashley"],"tags":["2024iT\u9435\u4eba\u8cfd","React","\u300aReact \u601d\u7dad\u9032\u5316\u300b\u8b80\u66f8\u7b46\u8a18","component","useCallback","useMemo"],"keywords":["2024iT\u9435\u4eba\u8cfd","React","\u300aReact \u601d\u7dad\u9032\u5316\u300b\u8b80\u66f8\u7b46\u8a18","component","useCallback","useMemo"]},"sidebar":"notesSidebar","previous":{"title":"uesEffect \u5176\u5be6\u4e0d\u662f functional component \u7684 API","permalink":"/frontend-notes/docs/react/react-zet-book/uesEffect"},"next":{"title":"React \u4e2d useContext \u8ddf React-MobX \u7684\u5dee\u7570","permalink":"/frontend-notes/docs/react/useContext-MobX"}}');var t=c(6070),s=c(5248);const a={slug:"useCallback-useMemo",title:"useCallback \u8207 useMemo \u7684\u6b63\u78ba\u4f7f\u7528\u6642\u6a5f",authors:["ashley"],tags:["2024iT\u9435\u4eba\u8cfd","React","\u300aReact \u601d\u7dad\u9032\u5316\u300b\u8b80\u66f8\u7b46\u8a18","component","useCallback","useMemo"],keywords:["2024iT\u9435\u4eba\u8cfd","React","\u300aReact \u601d\u7dad\u9032\u5316\u300b\u8b80\u66f8\u7b46\u8a18","component","useCallback","useMemo"]},l=void 0,r={},d=[{value:"<code>useCallback</code>\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f",id:"usecallback\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f",level:2},{value:"\u4f7f\u7528 <code>useCallback</code> hook \u524d",id:"\u4f7f\u7528-usecallback-hook-\u524d",level:3},{value:"\u4f7f\u7528 <code>useCallback</code> hook \u5f8c",id:"\u4f7f\u7528-usecallback-hook-\u5f8c",level:3},{value:"<code>useMemo</code>\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f",id:"usememo\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f",level:2}];function u(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h2,{id:"usecallback\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f",children:[(0,t.jsx)(n.code,{children:"useCallback"}),"\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useCallback"})," hook \u6700\u4e3b\u8981\u7684\u4f5c\u7528\u5728\u65bc\u5e6b\u52a9\u5176\u4ed6 React \u6548\u80fd\u512a\u5316\u7684\u624b\u6bb5\u7dad\u6301\u6b63\u5e38\uff0c\u4f8b\u5982\uff1aReact.",(0,t.jsx)(n.code,{children:"memo"}),"\u3001",(0,t.jsx)(n.code,{children:"useMemo"}),"\u3001",(0,t.jsx)(n.code,{children:"useEffect"})," \u7b49\u7b49\uff0c\u800c\u975e\u6548\u80fd\u512a\u5316\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5c07\u51fd\u5f0f\u50b3\u5165 ",(0,t.jsx)(n.code,{children:"useCallback"})," hook \uff0c\u4e26\u4e14\u50b3\u5165\u4e00\u500b\u4f9d\u8cf4\u9663\u5217\uff0c",(0,t.jsx)(n.code,{children:"useCallback"})," hook \u6703\u56de\u50b3\u4e00\u500b memoized \u51fd\u5f0f\uff0c\u9019\u500b memoized \u51fd\u5f0f\u53ea\u6709\u5728\u4f9d\u8cf4\u9663\u5217\u4e2d\u7684\u503c\u6709\u8b8a\u5316\u6642\u624d\u6703\u91cd\u65b0\u8a08\u7b97\uff0c\u5426\u5247\u6703\u56de\u50b3\u4e0a\u4e00\u6b21\u7684\u51fd\u5f0f\u3002\n\u4ee5\u4e0b\u662f\u4e00\u500b\u7c21\u55ae\u7684\u7bc4\u4f8b\u8aaa\u660e\uff1a"]}),"\n",(0,t.jsxs)(n.h3,{id:"\u4f7f\u7528-usecallback-hook-\u524d",children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"useCallback"})," hook \u524d"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",metastring:"Card.tsx",children:'import React, { memo } from "react";\nfunction Card ({ count , handleClick }:props){\n    return (\n        <div>\n            <div>{count}</div>\n            <Button onClick={handleClick}>Click me</Button>\n        </div>\n    );\n}\nexport default memo(Card);\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",metastring:"App.tsx",children:'import React, { useState, useCallback } from "react";\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  const updateCount = () => {\n    setCount((prevCount) => prevCount + 1);\n  };\n  const handleClick = () => {\n    alert(count);\n  };\n\n  return (\n    <div>\n      <Card count={count} handleClick={handleClick} />\n      <Button onClick={updateCount}>Update count</Button>\n    </div>\n  );\n}\nexport default App;\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u9019\u500b\u4f8b\u5b50\u4e2d\uff0c",(0,t.jsx)(n.code,{children:"handleClick"})," \u9019\u500b\u51fd\u5f0f\u5728\u6bcf\u4e00\u6b21 render \u7684\u904e\u7a0b\u4e2d\u90fd\u6703\u91cd\u65b0\u7522\u751f\u4e00\u500b\u65b0\u7684\u51fd\u5f0f\uff0c\u9019\u6a23\u6703\u5c0e\u81f4 ",(0,t.jsx)(n.code,{children:"Card"})," \u5143\u4ef6\u56e0\u70ba\u611f\u77e5\u5230 props \u4e2d\u7684 ",(0,t.jsx)(n.code,{children:"handleClick"})," \u51fd\u5f0f\u6709\u8b8a\u5316\u800c\u91cd\u65b0\u6e32\u67d3\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u9019\u88e1\u770b\u8d77\u4f86\u4f3c\u4e4e\u6c92\u4ec0\u9ebc\u554f\u984c\uff0c\u4f46\u662f\u554f\u984c\u5728 ",(0,t.jsx)(n.code,{children:"Card"})," \u5143\u4ef6\u88ab\u5305\u88f9\u5728 ",(0,t.jsx)(n.code,{children:"React.memo"})," \u4e2d\uff0c",(0,t.jsx)(n.code,{children:"React.memo"}),"\u662f hoc (higher-order component) \uff0c\u6703\u5728\u5143\u4ef6 re-render \u7684\u6642\u5019\u6aa2\u67e5 props \u662f\u5426\u6709\u8b8a\u5316\uff0c\u5982\u679c\u6709\u8b8a\u5316\u5c31\u6703\u91cd\u65b0\u6e32\u67d3\uff0c\u5426\u5247\u5c31\u6703\u900f\u904e\u5feb\u53d6\u8fd4\u56de\u4e0a\u4e00\u6b21\u7684\u7d50\u679c\uff0c\u4ee5\u9054\u5230\u6548\u80fd\u512a\u5316\u7684\u76ee\u7684\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4f46\u662f\u5728\u4e0a\u65b9\u7684\u4f8b\u5b50\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230 ",(0,t.jsx)(n.code,{children:"handleClick"})," \u51fd\u5f0f\u5728\u6bcf\u6b21 render \u6642\u90fd\u6703\u91cd\u65b0\u7522\u751f\u4e00\u500b\u65b0\u7684\u51fd\u5f0f\uff0c\u6bcf\u4e00\u6b21 re-render \u50b3\u5165\u7684 props \u7684 ",(0,t.jsx)(n.code,{children:"handleClick"})," \u90fd\u662f\u4e0d\u540c\u7684\u51fd\u5f0f\u9032\u800c\u5c0e\u81f4 ",(0,t.jsx)(n.code,{children:"Card"})," \u5143\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u5982\u6b64\u4e00\u4f86\uff0c\u5c31\u5931\u53bb\u4e86 ",(0,t.jsx)(n.code,{children:"React.memo"})," \u539f\u6709\u7684\u6548\u80fd\u512a\u5316\u7684\u76ee\u7684\u3002"]}),"\n",(0,t.jsxs)(n.h3,{id:"\u4f7f\u7528-usecallback-hook-\u5f8c",children:["\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"useCallback"})," hook \u5f8c"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",metastring:"Card.tsx",children:'import React, { memo } from "react";\nfunction Card ({ count , handleClick }:props){\n    return (\n        <div>\n            <div>{count}</div>\n            <Button onClick={handleClick}>Click me</Button>\n        </div>\n    );\n}\nexport default memo(Card);\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",metastring:"App.tsx",children:'import React, { useState, useCallback } from "react";\n\nfunction App() {\n  const [count, setCount] = useState(0);\n\n  const updateCount = () => {\n    setCount((prevCount) => prevCount + 1);\n  };\n  const handleClick = useCallback(() => {\n    alert(count);\n  }, [count]);\n\n  return (\n    <div>\n      <Card count={count} handleClick={handleClick} />\n      <Button onClick={updateCount}>Update count</Button>\n    </div>\n  );\n}\nexport default App;\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u4e0a\u65b9 ",(0,t.jsx)(n.code,{children:"handleClick"})," \u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"useCallback"})," hook \u4f86\u5305\u88f9\uff0c\u4e26\u4e14\u50b3\u5165\u4e00\u500b\u4f9d\u8cf4\u9663\u5217 ",(0,t.jsx)(n.code,{children:"[count]"}),"\uff0c\u7576 count \u8cc7\u6599\u6709\u8b8a\u5316\u6642\uff0c",(0,t.jsx)(n.code,{children:"handleClick"}),"\u624d\u6703\u91cd\u65b0\u7522\u751f\u4e00\u500b\u65b0\u7684\u51fd\u5f0f\uff0c\u5426\u5247\u6703\u56de\u50b3\u4e0a\u4e00\u6b21\u7684\u51fd\u5f0f\uff0c",(0,t.jsx)(n.code,{children:"Card"})," \u5143\u4ef6\u6240\u5305\u88f9\u7684",(0,t.jsx)(n.code,{children:"react.memo"}),"\u5c31\u53ef\u4ee5\u6b63\u5e38\u904b\u4f5c\uff0c\u9054\u5230\u6548\u80fd\u512a\u5316\u7684\u76ee\u7684\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u6b64\u4e00\u4f86\u53ef\u4ee5\u8b93\u51fd\u5f0f\u53ef\u4ee5\u53c3\u8207\u8cc7\u6599\u6d41\u7684\u8b8a\u5316\uff0c\u9032\u800c\u5e6b\u52a9 React hook dependencies \u5224\u65b7\u8cc7\u6599\u6d41\u7684\u908f\u8f2f\u904b\u4f5c\u6b63\u5e38\u3002"}),"\n",(0,t.jsxs)(n.h2,{id:"usememo\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f",children:[(0,t.jsx)(n.code,{children:"useMemo"}),"\u7684\u7528\u9014\u548c\u4f7f\u7528\u6642\u6a5f"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"useMemo"})," \u7528\u6cd5\u8ddf ",(0,t.jsx)(n.code,{children:"useCallback"})," \u985e\u4f3c\uff0c\u4f46\u662f ",(0,t.jsx)(n.code,{children:"useMemo"})," \u662f\u7528\u4f86\u5feb\u53d6\u9663\u5217\u3001\u7269\u4ef6\u6216\u8005\u662f\u901a\u5e38\u4f86\u7528\u8655\u7406\u8907\u96dc\u7684\u8a08\u7b97\uff0c\u4ee5\u7bc0\u7701\u6548\u80fd\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'import React, { useState, useMemo } from "react";\nfunction App() {\n  const [count, setCount] = useState(0);\n  const isEven = useMemo(() => {\n    return count % 2 === 0;\n  }, [count]);\n  return (\n    <div>\n      <div>{count}</div>\n      <div>{isEven ? "Even" : "Odd"}</div>\n      <Button onClick={() => setCount((prev) => prev + 1)}>Increment</Button>\n    </div>\n  );\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u4ee5\u4e0a\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u5011\u5be6\u4f5c\u4e00\u500b button \u4f86\u589e\u52a0 count \u7684\u503c\uff0c\u4e26\u4e14\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"useMemo"})," hook \u4f86\u5feb\u53d6 ",(0,t.jsx)(n.code,{children:"isEven"})," \u8b8a\u6578\uff0c\u7576 count \u7684\u503c\u6709\u8b8a\u5316\u6642\uff0c",(0,t.jsx)(n.code,{children:"isEven"})," \u8b8a\u6578\u624d\u6703\u91cd\u65b0\u8a08\u7b97\uff0c\u5426\u5247\u6703\u5feb\u53d6\u56de\u50b3\u4e0a\u4e00\u6b21\u7684\u7d50\u679c\u3002"]})]})}function i(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},5248:(e,n,c)=>{c.d(n,{R:()=>a,x:()=>l});var o=c(758);const t={},s=o.createContext(t);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);